<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TabunganKu</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- NAV: Beranda saja (disembunyikan otomatis di link publik) -->
  <header class="topbar" id="topbar">
    <nav class="nav">
      <a href="#" data-tab="beranda" class="chip active">Beranda</a>
    </nav>
  </header>

  <!-- LOGIN -->
  <section id="login-section" class="card tab beranda-tab">
    <h2>Login Admin</h2>
    <div class="row">
      <input id="user" placeholder="Username">
      <input id="pass" placeholder="Password" type="password">
      <button id="btnLogin">Login</button>
    </div>
    <p id="loginMsg" class="muted"></p>
  </section>

  <!-- DASHBOARD / ADMIN -->
  <section id="dashboard" class="card tab beranda-tab" style="display:none">
    <div class="row between">
      <h1>Dashboard Tabungan</h1>
      <button id="btnLogout" class="secondary small">Keluar</button>
    </div>
    <p id="msg" class="warn"></p>

    <div class="stats">
      <div class="stat"><small>Total Nasabah</small><h2 id="statNasabah">0</h2></div>
      <div class="stat"><small>Total Saldo</small><h2 id="statSaldo">Rp 0</h2></div>
      <div class="stat"><small>Saldo Rata-rata</small><h2 id="statRata">Rp 0</h2></div>
    </div>

    <div class="divider"></div>

    <h2>Daftar Nasabah</h2>
    <div class="muted">Klik “Buka” untuk lihat halaman publik nasabah, atau “Salin” untuk menyalin tautan.</div>
    <div class="table-wrap">
      <table id="tNasabah" class="table">
        <thead><tr><th>Nama</th><th>Saldo</th><th>Aksi</th><th>Link</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>

    <div class="divider"></div>

    <h2>Tambah Nasabah Baru</h2>
    <div class="row">
      <input id="namaBaru" placeholder="Nama Nasabah">
      <input id="saldoBaru" placeholder="Saldo Awal" inputmode="numeric">
      <button id="btnTambah">Tambah Nasabah</button>
    </div>

    <h2>Edit Saldo (dengan Tanggal)</h2>
    <div class="row">
      <!-- dropdown nama nasabah -->
      <select id="namaEditSel" title="Pilih Nasabah"></select>
      <input id="saldoEdit" placeholder="Jumlah" inputmode="numeric">
      <select id="aksiEdit" title="Jenis aksi">
        <option value="tambah">Tambah Saldo</option>
        <option value="kurangi">Tarik Saldo</option>
        <option value="koreksi">Koreksi (Penyesuaian)</option>
      </select>
      <input id="tglEdit" type="date" title="Tanggal (opsional)">
      <input id="jamEdit" type="time" step="60" title="Jam (opsional)">
      <input id="catatanEdit" placeholder="Catatan (opsional)" style="flex:1;min-width:220px">
      <button id="btnEdit">Simpan</button>
    </div>
    <div class="muted small">Jika tanggal/jam kosong, sistem memakai waktu saat ini.</div>

    <div class="divider"></div>

    <h2>Kelola Riwayat Transaksi</h2>
    <div class="row">
      <select id="riwNama" title="Pilih Nasabah"></select>
      <button id="riwRefresh" class="secondary small">Muat Riwayat</button>
    </div>
    <div id="riwEmpty" class="muted" style="display:none">Belum ada riwayat.</div>
    <div class="table-wrap">
      <table id="riwTable" class="table">
        <thead><tr><th>#</th><th>Tanggal</th><th>Jenis</th><th>Nominal</th><th>Catatan</th><th>Hapus</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="muted small">Menghapus riwayat <em>tidak</em> mengubah saldo (hanya catatan).</div>

    <div class="divider"></div>

    <h2>Edit Nama Nasabah</h2>
    <div class="row">
      <select id="oldNameSel" title="Nama Lama"></select>
      <input id="newName" placeholder="Nama Baru">
      <button id="btnRename">Ubah Nama</button>
    </div>
  </section>

  <!-- HALAMAN PUBLIK: /?n=Nama (JS akan menampilkan ini pada mode publik) -->
  <section id="public-view" class="card" style="display:none">
    <div class="trust">
      <strong>Lebih simpel dari bank</strong> — tanpa ribet, tanpa antre, dan gratis simpan setelah 1 bulan.
      <br>Tarik kapan saja langsung ke <strong>Hepi Susanto</strong>, cair cepat via WhatsApp.
    </div>

    <h1 id="pv-title" class="mt16">Halo, ...</h1>
    <p class="muted" id="pv-note">Tautan pribadi nasabah.</p>

    <div class="stat big">
      <small>Saldo Anda</small>
      <h2 id="pv-saldo">Rp 0</h2>
    </div>

    <div class="row">
      <input id="pv-amount" placeholder="Nominal (contoh 100.000)" inputmode="numeric">
    </div>
    <div class="row">
      <button id="pv-add">Tambah Tabungan</button>
      <button id="pv-withdraw" class="secondary">Tarik Tabungan</button>
    </div>

    <div class="divider"></div>
    <h2>Riwayat Transaksi</h2>
    <div id="pv-empty" class="muted">Belum ada transaksi.</div>
    <div class="table-wrap">
      <table id="pv-history" class="table">
        <thead><tr><th>Tanggal</th><th>Jenis</th><th>Nominal</th><th>Catatan</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
    <div class="muted small">Riwayat bersifat informatif. Perubahan saldo resmi dilakukan oleh admin.</div>
  </section>

  <script src="/app.js"></script>
</body>
</html>
